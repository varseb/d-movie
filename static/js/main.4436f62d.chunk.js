(this["webpackJsonpd-movie"]=this["webpackJsonpd-movie"]||[]).push([[0],{65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"getConfiguration",(function(){return _}));var c={};n.r(c),n.d(c,"getGenres",(function(){return M}));var a={};n.r(a),n.d(a,"discoverMovies",(function(){return R}));var i={};n.r(i),n.d(i,"searchMovies",(function(){return G}));var o={};n.r(o),n.d(o,"getConfiguration",(function(){return U})),n.d(o,"default",(function(){return w}));var s={};n.r(s),n.d(s,"getGenres",(function(){return L})),n.d(s,"default",(function(){return D}));var u={};n.r(u),n.d(u,"openStack",(function(){return B})),n.d(u,"closeStack",(function(){return J})),n.d(u,"default",(function(){return K}));var l={};n.r(l),n.d(l,"SEARCH_MOVIES_SUCCESS",(function(){return W})),n.d(l,"searchMovies",(function(){return Z})),n.d(l,"default",(function(){return $}));var d={};n.r(d),n.d(d,"discoverMovies",(function(){return ne})),n.d(d,"default",(function(){return re}));var v={};n.r(v),n.d(v,"getGenres",(function(){return le}));var j={};n.r(j),n.d(j,"getMovies",(function(){return de})),n.d(j,"getSearchResults",(function(){return ve}));var f=n(1),m=n(0),h=n.n(m),O=n(9),b=n.n(O),g=n(16),p=n(7),y=n(33),S=(n(46),n(2)),k=n(34),E=n.n(k),x=function(e){return E()(Object(S.a)(Object(S.a)({},e),{},{url:"https://api.themoviedb.org/3"+e.url,params:Object(S.a)(Object(S.a)({},e.params||{}),{},{api_key:"0d350753f143701136974b765ca31ac5"})}))},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){return ie.dispatch({type:e,payload:Object(S.a)(Object(S.a)({},t),{},{data:n.data})})}},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=(n.response||{data:{}}).data;return ie.dispatch({type:e,payload:Object(S.a)(Object(S.a)({},t),{},{error:r.error})})}},_=function(){return x({method:"GET",url:"/configuration"})},M=function(){return x({method:"GET",url:"/genre/movie/list"})},R=function(){return x({method:"GET",url:"/discover/movie"})},G=function(e){var t=e.query;return x({method:"GET",url:"/search/movie",params:{query:t}})},T={config:r,genre:c,movie:a,search:i},I="config/GET_CONFIGURATION_SUCCESS",A={images:{}},U=function(){return function(e){return e({type:"config/GET_CONFIGURATION_REQUEST",meta:T.config.getConfiguration().then(N(I)).catch(C("config/GET_CONFIGURATION_FAILURE"))})}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case I:var c=r.data.images;return{images:c};default:return e}},F=n(8),q="genre/GET_GENRES_SUCCESS",V={genres:{}},L=function(){return function(e){return e({type:"genre/GET_GENRES_REQUEST",meta:T.genre.getGenres().then(N(q)).catch(C("genre/GET_GENRES_FAILURE"))})}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case q:var c=r.data.genres;return{genres:c.reduce((function(e,t){return Object(S.a)(Object(S.a)({},e),{},Object(F.a)({},t.id,t))}),{})};default:return e}},H=n(17),Q="layout/OPEN_STACK",P="layout/CLOSE_STACK",z={stack:[]},B=function(e){return function(t){return function(n){return n({type:Q,payload:{namespace:e,props:t}})}}},J=function(e){return function(){return function(t){return t({type:P,payload:{namespace:e}})}}},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Q:var c=r.namespace,a=r.props;return Object(S.a)(Object(S.a)({},e),{},{stack:[].concat(Object(H.a)(e.stack),[{namespace:c,props:a||{}}])});case P:return Object(S.a)(Object(S.a)({},e),{},{stack:e.stack.filter((function(e){return e.namespace!==r.namespace}))});default:return e}},Y="search/UPDATE_QUERY",W="search/SEARCH_MOVIES_SUCCESS",X={query:"",results:{}},Z=function(e){return function(t){t({type:Y,payload:e}),e.query&&t({type:"search/SEARCH_MOVIES_REQUEST",meta:T.search.searchMovies(e).then(N(W,e)).catch(C("search/SEARCH_MOVIES_FAILURE"))})}},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Y:return Object(S.a)(Object(S.a)({},e),{},{query:r.query});case W:var c=r.query,a=r.data.results;return Object(S.a)(Object(S.a)({},e),{},{results:Object(S.a)(Object(S.a)({},e.results),{},Object(F.a)({},c,a.map((function(e){return e.id}))))});default:return e}},ee="movie/DISCOVER_MOVIES_SUCCESS",te={list:[],movies:{}},ne=function(){return function(e){return e({type:"movie/DISCOVER_MOVIES_REQUEST",meta:T.movie.discoverMovies().then(N(ee)).catch(C("movie/DISCOVER_MOVIES_FAILURE"))})}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case ee:var c=r.data.results;return Object(S.a)(Object(S.a)({},e),{},{list:c.map((function(e){return e.id})),movies:c.reduce((function(e,t){return Object(S.a)(Object(S.a)({},e),{},Object(F.a)({},t.id,t))}),Object(S.a)({},e.movies))});case W:var a=r.data.results;return Object(S.a)(Object(S.a)({},e),{},{movies:a.reduce((function(e,t){return Object(S.a)(Object(S.a)({},e),{},Object(F.a)({},t.id,t))}),Object(S.a)({},e.movies))});default:return e}},ce=Object(p.c)({config:w,genre:D,layout:K,movie:re,search:$}),ae=[y.a];var ie=Object(p.e)(ce,{},p.d.apply(void 0,[p.a.apply(void 0,ae)].concat([]))),oe=n(6),se=n.n(oe),ue=n(13),le=Object(ue.a)((function(e){return e.genre.genres}),(function(e){return e.movie.genre_ids}),(function(e,t){return t.map((function(t){return e[t]}))})),de=Object(ue.a)((function(e){return e.movie}),(function(e){return(e.list||[]).map((function(t){return e.movies[t]}))})),ve=Object(ue.a)((function(e){return e.movie}),(function(e){return e.search}),(function(e,t){return(t.results[t.query]||[]).map((function(t){return e.movies[t]}))})),je={genre:v,movie:j},fe={config:o,genre:s,layout:u,movie:d,search:l},me=function(e,t,n){return Object(g.b)(e,t&&function(e){return Object(p.b)(t,e)})(n)},he=me(null,{openSearch:fe.layout.openStack("search")},(function(e){var t=e.openSearch;return Object(f.jsxs)("div",{className:"ui-header",children:[Object(f.jsx)("div",{className:"ui-header-title",children:Object(f.jsx)("h1",{children:"MUST WATCH"})}),Object(f.jsx)("div",{className:"ui-header-search",onClick:function(){return t()},children:Object(f.jsx)("i",{className:"icon-search"})})]})})),Oe=n(69),be=n(68),ge=function(e){var t=e.className,n=e.children,r=Object(m.useRef)(null),c=h.a.Children.toArray(n);return Object(f.jsx)(Oe.a,{component:null,children:c.map((function(e,n){return Object(f.jsx)(be.a,{nodeRef:r,timeout:400,children:Object(f.jsx)("div",{ref:r,className:se()("layer-wrap",t,{active:n===c.length-1}),children:e})},e.key)}))})},pe=n(35),ye=n.n(pe),Se=function(){Object(m.useEffect)((function(){return document.body.style.overflow="hidden",function(){return document.body.removeAttribute("style")}}))},ke=function(e){var t=e.className,n=e.closeStack,r=e.children;return Se(),Object(f.jsxs)("div",{className:se()("ui-stack",t),children:[Object(f.jsx)("div",{className:"ui-stack-close",onClick:n,children:Object(f.jsx)("i",{className:"icon-close"})}),r]})},Ee=n(18),xe=me((function(e,t){var n=e.config,r=e.movie,c=t.id;return{movie:r.movies[c],config:n.images}}),null,(function(e){var t=e.size,n=void 0===t?"w500":t,r=e.backdrop,c=void 0!==r&&r,a=e.onClick,i=void 0===a?null:a,o=e.movie,s=e.config,u=Object(m.useState)(!1),l=Object(Ee.a)(u,2),d=l[0],v=l[1],j=[s.base_url,n,c?o.backdrop_path:o.poster_path].join("");return Object(f.jsx)("div",{className:se()("ui-poster",{"has-click":i}),onClick:i,children:Object(f.jsx)("img",{alt:"",className:se()({loaded:d}),src:j,onLoad:function(){v(!0)}})})})),Ne=Object(H.a)(Array(5).keys()),Ce=function(e){var t=e.voteAverage;return Object(f.jsx)("div",{className:"ui-rating",children:Ne.map((function(e){return Object(f.jsx)("i",{className:se()("icon-star-outline",{"icon-star-rate":t>=2*e})},e)}))})},_e={movie:me((function(e,t){var n=e.movie,r=e.genre,c=t.id;return{movie:n.movies[c],genres:je.genre.getGenres({genre:r,movie:n.movies[c]})}}),{closeStack:fe.layout.closeStack("movie")},(function(e){var t=e.movie,n=e.genres,r=e.closeStack;return Object(f.jsxs)(ke,{className:"movie-stack",closeStack:r,children:[Object(f.jsx)("div",{className:"movie-stack-backdrop",children:Object(f.jsx)(xe,{id:t.id,size:"w1280",backdrop:!0})}),Object(f.jsxs)("div",{className:"movie-stack-content",children:[Object(f.jsx)("h1",{className:"movie-stack-title",children:t.title}),t.vote_average>0&&Object(f.jsx)("div",{className:"movie-stack-rating",children:Object(f.jsx)(Ce,{voteAverage:t.vote_average})}),t.release_date&&Object(f.jsx)("div",{className:"movie-stack-date",children:ye()(t.release_date).format("Y")}),Object(f.jsx)("p",{className:"movie-stack-overview",children:t.overview}),n.length>0&&Object(f.jsx)("ul",{className:"movie-stack-genres",children:n.map((function(e){var t=e.id,n=e.name;return Object(f.jsx)("li",{children:n},t)}))})]})]})})),search:me((function(e){var t=e.search,n=e.movie;return{query:t.query,movies:je.movie.getMovies({movie:n}),results:je.movie.getSearchResults({movie:n,search:t})}}),{searchMovies:fe.search.searchMovies,closeStack:fe.layout.closeStack("search"),openMovie:fe.layout.openStack("movie")},(function(e){var t=e.query,n=e.movies,r=e.results,c=e.searchMovies,a=e.openMovie,i=e.closeStack,o=Object(m.useState)(n),s=Object(Ee.a)(o,2),u=s[0],l=s[1];return Object(m.useEffect)((function(){r.length&&l(r)}),[r,l]),Object(m.useEffect)((function(){t||l(n)}),[t,n,l]),Object(f.jsxs)(ke,{className:"search-stack",closeStack:i,children:[Object(f.jsx)("div",{className:"search-stack-head",children:Object(f.jsxs)("div",{className:"search-stack-input-wrapper",children:[Object(f.jsx)("input",{autoFocus:!0,type:"text",placeholder:"search movies",value:t,onChange:function(e){return c({query:e.target.value})},className:"search-stack-input"}),Object(f.jsx)("i",{className:"icon-search"})]})}),u.length>0&&Object(f.jsx)("div",{className:"search-stack-grid",children:u.map((function(e){var t=e.id;return Object(f.jsx)("div",{className:"search-stack-grid-item",children:Object(f.jsx)(xe,{id:t,size:"w342",onClick:function(){return a({id:t})}})},t)}))})]})}))},Me=me((function(e){return{stack:e.layout.stack}}),null,(function(e){var t=e.stack;e.closeStack;return Object(f.jsx)(ge,{className:"ui-stack-layer",children:t.map((function(e){var t=e.namespace,n=e.props,r=_e[t];return r?Object(f.jsx)(r,Object(S.a)({},n),t):null}))})})),Re=me((function(e){return{stackOpen:e.layout.stack.length>0}}),null,(function(e){var t=e.stackOpen,n=e.children;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("main",{className:se()("layer-main",{"stack-open":t}),children:[Object(f.jsx)("div",{className:"layer-main-header",children:Object(f.jsx)(he,{})}),Object(f.jsx)("div",{className:"layer-main-content",children:n})]}),Object(f.jsx)(Me,{})]})})),Ge=me((function(e){var t=e.movie;return{movies:je.movie.getMovies({movie:t})}}),{discoverMovies:fe.movie.discoverMovies,getConfiguration:fe.config.getConfiguration,getGenres:fe.genre.getGenres,openMovie:fe.layout.openStack("movie")},(function(e){var t=e.movies,n=e.discoverMovies,r=e.getConfiguration,c=e.getGenres,a=e.openMovie;return Object(m.useEffect)((function(){n()}),[n]),Object(m.useEffect)((function(){r()}),[r]),Object(m.useEffect)((function(){c()}),[c]),Object(f.jsx)("div",{className:"movie-grid",children:t.map((function(e){var t=e.id;e.title;return Object(f.jsx)("div",{className:"movie-grid-item",children:Object(f.jsx)(xe,{id:t,onClick:function(){return a({id:t})}})},t)}))})})),Te=(n(65),function(){return Object(f.jsx)(g.a,{store:ie,children:Object(f.jsx)(Re,{children:Object(f.jsx)(Ge,{})})})}),Ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},Ae=document.getElementById("root");b.a.render(Object(f.jsx)(h.a.StrictMode,{children:Object(f.jsx)(Te,{})}),Ae),Ie()}},[[66,1,2]]]);
//# sourceMappingURL=main.4436f62d.chunk.js.map