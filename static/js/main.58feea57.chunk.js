(this["webpackJsonpd-movie"]=this["webpackJsonpd-movie"]||[]).push([[0],{65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"getConfiguration",(function(){return _}));var c={};n.r(c),n.d(c,"getGenres",(function(){return T}));var i={};n.r(i),n.d(i,"discoverMovies",(function(){return M})),n.d(i,"getMovie",(function(){return R})),n.d(i,"getCredits",(function(){return I}));var a={};n.r(a),n.d(a,"searchMovies",(function(){return G}));var o={};n.r(o),n.d(o,"getConfiguration",(function(){return F})),n.d(o,"default",(function(){return D}));var s={};n.r(s),n.d(s,"getGenres",(function(){return Q})),n.d(s,"default",(function(){return H}));var u={};n.r(u),n.d(u,"openStack",(function(){return K})),n.d(u,"closeStack",(function(){return Y})),n.d(u,"default",(function(){return W}));var d={};n.r(d),n.d(d,"SEARCH_MOVIES_SUCCESS",(function(){return ee})),n.d(d,"updateFilter",(function(){return ne})),n.d(d,"updateQuery",(function(){return re})),n.d(d,"searchMovies",(function(){return ce})),n.d(d,"default",(function(){return ie}));var l={};n.r(l),n.d(l,"discoverMovies",(function(){return de})),n.d(l,"getMovie",(function(){return le})),n.d(l,"getCredits",(function(){return ve})),n.d(l,"default",(function(){return je}));var v={};n.r(v),n.d(v,"getGenres",(function(){return ye}));var j={};n.r(j),n.d(j,"getMovies",(function(){return Ee})),n.d(j,"getCast",(function(){return Se})),n.d(j,"getDirector",(function(){return xe})),n.d(j,"filterMovies",(function(){return ke})),n.d(j,"getResults",(function(){return Ce}));var f=n(1),m=n(0),O=n.n(m),b=n(9),h=n.n(b),g=n(16),p=n(8),y=n(32),E=(n(46),n(2)),S=n(33),x=n.n(S),k=function(e){return x()(Object(E.a)(Object(E.a)({},e),{},{url:"https://api.themoviedb.org/3"+e.url,params:Object(E.a)(Object(E.a)({},e.params||{}),{},{api_key:"0d350753f143701136974b765ca31ac5"})}))},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){return be.dispatch({type:e,payload:Object(E.a)(Object(E.a)({},t),{},{data:n.data})})}},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=(n.response||{data:{}}).data;return be.dispatch({type:e,payload:Object(E.a)(Object(E.a)({},t),{},{error:r.error})})}},_=function(){return k({method:"GET",url:"/configuration"})},T=function(){return k({method:"GET",url:"/genre/movie/list"})},M=function(){return k({method:"GET",url:"/discover/movie"})},R=function(e){var t=e.id;return k({method:"GET",url:"/movie/".concat(t)})},I=function(e){var t=e.id;return k({method:"GET",url:"/movie/".concat(t,"/credits")})},G=function(e){var t=e.query;return k({method:"GET",url:"/search/movie",params:{query:t}})},U={config:r,genre:c,movie:i,search:a},A="config/GET_CONFIGURATION_SUCCESS",w={images:{}},F=function(){return function(e){return e({type:"config/GET_CONFIGURATION_REQUEST",meta:U.config.getConfiguration().then(C(A)).catch(N("config/GET_CONFIGURATION_FAILURE"))})}},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case A:var c=r.data.images;return{images:c};default:return e}},q=n(6),V="genre/GET_GENRES_SUCCESS",L={genres:{}},Q=function(){return function(e){return e({type:"genre/GET_GENRES_REQUEST",meta:U.genre.getGenres().then(C(V)).catch(N("genre/GET_GENRES_FAILURE"))})}},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case V:var c=r.data.genres;return{genres:c.reduce((function(e,t){return Object(E.a)(Object(E.a)({},e),{},Object(q.a)({},t.id,t))}),{})};default:return e}},P=n(17),J="layout/OPEN_STACK",z="layout/CLOSE_STACK",B={stack:[]},K=function(e){return function(t){return function(n){return n({type:J,payload:{namespace:e,props:t}})}}},Y=function(e){return function(){return function(t){return t({type:z,payload:{namespace:e}})}}},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case J:var c=r.namespace,i=r.props;return Object(E.a)(Object(E.a)({},e),{},{stack:[].concat(Object(P.a)(e.stack),[{namespace:c,props:i||{}}])});case z:return Object(E.a)(Object(E.a)({},e),{},{stack:e.stack.filter((function(e){return e.namespace!==r.namespace}))});default:return e}},X="search/UPDATE_QUERY",Z="search/UPDATE_FILTER",$="search/SEARCH_MOVIES_REQUEST",ee="search/SEARCH_MOVIES_SUCCESS",te={query:"",filter:{rating:null},results:{},loading:{}},ne=function(e){return function(t){return t({type:Z,payload:e})}},re=function(e){return function(t){t({type:X,payload:e}),e.query&&t(ce(e))}},ce=function(e){return function(t){return t({type:$,payload:e,meta:U.search.searchMovies(e).then(C(ee,e)).catch(N("search/SEARCH_MOVIES_FAILURE"))})}},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case X:return Object(E.a)(Object(E.a)({},e),{},{query:r.query});case Z:return Object(E.a)(Object(E.a)({},e),{},{filter:Object(E.a)(Object(E.a)({},e.filter),r)});case $:return Object(E.a)(Object(E.a)({},e),{},{loading:Object(E.a)(Object(E.a)({},e.loading),{},Object(q.a)({},r.query,!0))});case ee:var c=r.query,i=r.data.results;return Object(E.a)(Object(E.a)({},e),{},{loading:Object(E.a)(Object(E.a)({},e.loading),{},Object(q.a)({},c,!1)),results:Object(E.a)(Object(E.a)({},e.results),{},Object(q.a)({},c,i.map((function(e){return e.id}))))});default:return e}},ae="movie/DISCOVER_MOVIES_SUCCESS",oe="movie/GET_MOVIE_SUCCESS",se="movie/GET_CREDITS_SUCCESS",ue={list:[],movies:{},credits:{}},de=function(){return function(e){return e({type:"movie/DISCOVER_MOVIES_REQUEST",meta:U.movie.discoverMovies().then(C(ae)).catch(N("movie/DISCOVER_MOVIES_FAILURE"))})}},le=function(e){return function(t){return t({type:"movie/GET_MOVIE_REQUEST",meta:U.movie.getMovie(e).then(C(oe,e)).catch(N("movie/GET_MOVIE_FAILURE"))})}},ve=function(e){return function(t){return t({type:"movie/GET_CREDITS_REQUEST",meta:U.movie.getCredits(e).then(C(se,e)).catch(N("movie/GET_CREDITS_FAILURE"))})}},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case ae:var c=r.data.results;return Object(E.a)(Object(E.a)({},e),{},{list:c.map((function(e){return e.id})),movies:c.reduce((function(e,t){return Object(E.a)(Object(E.a)({},e),{},Object(q.a)({},t.id,t))}),Object(E.a)({},e.movies))});case ee:var i=r.data.results;return Object(E.a)(Object(E.a)({},e),{},{movies:i.reduce((function(e,t){return Object(E.a)(Object(E.a)({},e),{},Object(q.a)({},t.id,t))}),Object(E.a)({},e.movies))});case oe:var a=r.id,o=r.data;return Object(E.a)(Object(E.a)({},e),{},{movies:Object(E.a)(Object(E.a)({},e.movies),{},Object(q.a)({},a,Object(E.a)(Object(E.a)({},e.movies[a]),o)))});case se:var s=r.id,u=r.data;return Object(E.a)(Object(E.a)({},e),{},{credits:Object(E.a)(Object(E.a)({},e.credits),{},Object(q.a)({},s,u))});default:return e}},fe=Object(p.c)({config:D,genre:H,layout:W,movie:je,search:ie}),me=[y.a];var Oe=Object(p.e)(fe,function(){try{return JSON.parse(window.localStorage.getItem("state"))||{}}catch(e){return{}}}(),p.d.apply(void 0,[p.a.apply(void 0,me)].concat([])));Oe.subscribe((function(){var e=Oe.getState();!function(e){try{window.localStorage.setItem("state",JSON.stringify(e))}catch(t){}}({config:e.config,genres:e.genres})}));var be=Oe,he=n(7),ge=n.n(he),pe=n(10),ye=Object(pe.a)((function(e){return e.genre.genres}),(function(e){return e.movie.movies}),(function(e){return e.id}),(function(e,t,n){return t[n].genre_ids.map((function(t){return e[t]}))})),Ee=Object(pe.a)((function(e){return e.movie}),(function(e){return(e.list||[]).map((function(t){return e.movies[t]}))})),Se=Object(pe.a)((function(e){return e.movie.credits}),(function(e){return e.id}),(function(e,t){return e[t]?e[t].cast.slice(0,3):[]})),xe=Object(pe.a)((function(e){return e.movie.credits}),(function(e){return e.id}),(function(e,t){return e[t]?e[t].crew.find((function(e){return"Director"===e.job})):null})),ke=Object(pe.a)((function(e){return e.movies}),(function(e){return e.rating}),(function(e,t){return e.filter((function(e){var n=e.vote_average;return n&&n>=t&&n<t+2}))})),Ce=Object(pe.a)((function(e){return e.movie}),(function(e){return e.search}),(function(e,t){var n,r=t.query,c=t.filter.rating,i=t.results;return n=r?(i[r]||[]).map((function(t){return e.movies[t]})):Ee({movie:e}),null!==c?ke({movies:n,rating:c}):n})),Ne={genre:v,movie:j},_e={config:o,genre:s,layout:u,movie:l,search:d},Te=function(e,t,n){return Object(g.b)(e,t&&function(e){return Object(p.b)(t,e)})(n)},Me=Te(null,{openSearch:_e.layout.openStack("search")},(function(e){var t=e.openSearch;return Object(f.jsxs)("div",{className:"ui-header",children:[Object(f.jsxs)("div",{className:"ui-header-title",children:[Object(f.jsx)("i",{className:"icon-logo"}),Object(f.jsx)("h1",{children:"MUST WATCH"})]}),Object(f.jsx)("div",{className:"ui-header-search",onClick:function(){return t()},children:Object(f.jsx)("i",{className:"icon-search"})})]})})),Re=n(69),Ie=n(68),Ge=function(e){var t=e.className,n=e.children,r=Object(m.useRef)(null),c=O.a.Children.toArray(n);return Object(f.jsx)(Re.a,{component:null,children:c.map((function(e,n){return Object(f.jsx)(Ie.a,{nodeRef:r,timeout:400,children:Object(f.jsx)("div",{ref:r,className:ge()("layer-wrap",t,{active:n===c.length-1}),children:e})},e.key)}))})},Ue=function(){Object(m.useEffect)((function(){return document.body.style.overflow="hidden",function(){return document.body.removeAttribute("style")}}))},Ae=function(e){var t=e.className,n=e.closeStack,r=e.children;return Ue(),Object(f.jsxs)("div",{className:ge()("ui-stack",t),children:[Object(f.jsx)("div",{className:"ui-stack-close",onClick:n,children:Object(f.jsx)("i",{className:"icon-close"})}),r]})},we=n(35),Fe=Te((function(e,t){var n=e.config,r=e.movie,c=t.id;return{movie:r.movies[c],config:n.images}}),null,(function(e){var t=e.size,n=void 0===t?"w500":t,r=e.backdrop,c=void 0!==r&&r,i=e.onClick,a=void 0===i?null:i,o=e.movie,s=o.title,u=o.backdrop_path,d=o.poster_path,l=e.config,v=Object(m.useState)(!1),j=Object(we.a)(v,2),O=j[0],b=j[1],h=c&&u||d,g=[l.base_url,n,h].join("");return Object(f.jsx)("div",{onClick:a,className:ge()("ui-poster",{backdrop:c,"has-click":a}),children:Object(f.jsxs)("div",{className:ge()("ui-poster-content",{"no-image":!h,loaded:O}),children:[h&&Object(f.jsx)("img",{alt:"",src:g,onLoad:function(){b(!0)}}),!h&&!c&&Object(f.jsx)("div",{className:"ui-poster-title",children:s})]})})})),De=Object(P.a)(Array(5).keys()),qe=function(e){var t=e.voteAverage,n=e.onChange;return Object(f.jsx)("div",{className:"ui-rating",children:De.map((function(e){return Object(f.jsx)("i",{onClick:function(){n&&n(e)},className:ge()("icon-star-outline",{"icon-star-rate":null!==t&&t>=2*e})},e)}))})},Ve=n(34),Le=n.n(Ve),Qe=function(e){var t=e.releaseDate,n=e.runTime,r=[];if(t&&r.push(Object(f.jsx)("span",{children:Le()(t).format("Y")},t)),n>0){var c=Math.floor(n/60),i=Math.floor(n%60%60);r.push(Object(f.jsxs)("span",{className:"fade-in",children:[c>0&&"".concat(c,"h")," ",i>0&&"".concat(i,"m")]},n))}return Object(f.jsx)("div",{className:"ui-info",children:r.reduce((function(e,t){return[e," - ",t]}))})},He=function(e){var t=e.genres;return Object(f.jsx)("ul",{className:"ui-genres",children:t.map((function(e){var t=e.id,n=e.name;return Object(f.jsx)("li",{children:n},t)}))})},Pe=function(e){var t=e.title,n=e.value;return Object(f.jsxs)("div",{className:"ui-credits",children:[Object(f.jsx)("div",{className:"ui-credits-title",children:t}),Object(f.jsx)("div",{className:"ui-credits-value",children:n})]})},Je={movie:Te((function(e,t){var n=e.movie,r=e.genre,c=t.id;return{movie:n.movies[c],genres:Ne.genre.getGenres({genre:r,movie:n,id:c}),cast:Ne.movie.getCast({movie:n,id:c}),director:Ne.movie.getDirector({movie:n,id:c})}}),{getMovie:_e.movie.getMovie,getCredits:_e.movie.getCredits,closeStack:_e.layout.closeStack("movie")},(function(e){var t=e.id,n=e.movie,r=n.title,c=n.vote_average,i=n.release_date,a=n.runtime,o=n.overview,s=e.genres,u=e.cast,d=e.director,l=e.getMovie,v=e.getCredits,j=e.closeStack;return Object(m.useEffect)((function(){l({id:t}),v({id:t})}),[t,l,v]),Object(f.jsxs)(Ae,{className:"movie-stack",closeStack:j,children:[Object(f.jsx)("div",{className:"movie-stack-backdrop",children:Object(f.jsx)(Fe,{id:t,size:"w1280",backdrop:!0})}),Object(f.jsxs)("div",{className:"movie-stack-content",children:[Object(f.jsx)("h1",{className:"movie-stack-title",children:r}),c>0&&Object(f.jsx)("div",{className:"movie-stack-rating",children:Object(f.jsx)(qe,{voteAverage:c})}),(i||a>0)&&Object(f.jsx)("div",{className:"movie-stack-info",children:Object(f.jsx)(Qe,{releaseDate:i,runTime:a})}),Object(f.jsx)("p",{className:"movie-stack-overview",children:o}),s.length>0&&Object(f.jsx)("div",{className:"movie-stack-genres",children:Object(f.jsx)(He,{genres:s})}),u.length>0&&Object(f.jsx)("div",{className:"movie-stack-credits fade-in",children:Object(f.jsx)(Pe,{title:"Cast",value:u.map((function(e){return e.name})).reduce((function(e,t){return[e,", ",t]}))})}),d&&Object(f.jsx)("div",{className:"movie-stack-credits fade-in",children:Object(f.jsx)(Pe,{title:"Director",value:d.name})})]})]})})),search:Te((function(e){var t=e.search,n=e.movie;return{query:t.query,filter:t.filter,results:Ne.movie.getResults({movie:n,search:t}),loading:t.loading[t.query]}}),{updateFilter:_e.search.updateFilter,updateQuery:_e.search.updateQuery,closeStack:_e.layout.closeStack("search"),openMovie:_e.layout.openStack("movie")},(function(e){var t=e.query,n=e.filter,r=e.results,c=e.loading,i=e.updateQuery,a=e.updateFilter,o=e.openMovie,s=e.closeStack;return Object(f.jsxs)(Ae,{className:"search-stack",closeStack:s,children:[Object(f.jsx)("div",{className:"search-stack-head",children:Object(f.jsxs)("div",{className:"search-stack-input-wrapper",children:[Object(f.jsx)("input",{autoFocus:!0,type:"text",placeholder:"search movies",value:t,onChange:function(e){return i({query:e.target.value})},className:"search-stack-input"}),Object(f.jsx)("i",{className:"icon-search"}),Object(f.jsx)("div",{className:"search-stack-input-rating",children:Object(f.jsx)(qe,{voteAverage:n.rating,onChange:function(e){var t=2*e;a({rating:t===n.rating?null:t})}})})]})}),!c&&!r.length&&Object(f.jsx)("div",{className:"search-stack-empty fade-in",children:Object(f.jsx)("p",{children:"No movies found"})}),r.length>0&&Object(f.jsx)("div",{className:"search-stack-grid",children:r.map((function(e){var t=e.id;return Object(f.jsx)("div",{className:"search-stack-grid-item",children:Object(f.jsx)(Fe,{id:t,size:"w342",onClick:function(){return o({id:t})}})},t)}))})]})}))},ze=Te((function(e){return{stack:e.layout.stack}}),null,(function(e){var t=e.stack;e.closeStack;return Object(f.jsx)(Ge,{className:"ui-stack-layer",children:t.map((function(e){var t=e.namespace,n=e.props,r=Je[t];return r?Object(f.jsx)(r,Object(E.a)({},n),t):null}))})})),Be=Te((function(e){return{stackOpen:e.layout.stack.length>0}}),null,(function(e){var t=e.stackOpen,n=e.children;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("main",{className:ge()("layer-main",{"stack-open":t}),children:[Object(f.jsx)("div",{className:"layer-main-header",children:Object(f.jsx)(Me,{})}),Object(f.jsx)("div",{className:"layer-main-content",children:n})]}),Object(f.jsx)(ze,{})]})})),Ke=Te((function(e){var t=e.movie;return{movies:Ne.movie.getMovies({movie:t})}}),{discoverMovies:_e.movie.discoverMovies,getConfiguration:_e.config.getConfiguration,getGenres:_e.genre.getGenres,openMovie:_e.layout.openStack("movie")},(function(e){var t=e.movies,n=e.discoverMovies,r=e.getConfiguration,c=e.getGenres,i=e.openMovie;return Object(m.useEffect)((function(){n()}),[n]),Object(m.useEffect)((function(){r()}),[r]),Object(m.useEffect)((function(){c()}),[c]),Object(f.jsx)("div",{className:"movie-grid",children:t.map((function(e){var t=e.id;e.title;return Object(f.jsx)("div",{className:"movie-grid-item",children:Object(f.jsx)(Fe,{id:t,onClick:function(){return i({id:t})}})},t)}))})})),Ye=(n(65),function(){return Object(f.jsx)(g.a,{store:be,children:Object(f.jsx)(Be,{children:Object(f.jsx)(Ke,{})})})}),We=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),i(e),a(e)}))},Xe=document.getElementById("root");h.a.render(Object(f.jsx)(O.a.StrictMode,{children:Object(f.jsx)(Ye,{})}),Xe),setTimeout((function(){return Xe.classList.add("ready")}),1e3),We()}},[[66,1,2]]]);
//# sourceMappingURL=main.58feea57.chunk.js.map