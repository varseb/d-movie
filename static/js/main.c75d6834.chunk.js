(this["webpackJsonpd-movie"]=this["webpackJsonpd-movie"]||[]).push([[0],{65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"getConfiguration",(function(){return _}));var c={};n.r(c),n.d(c,"getGenres",(function(){return R}));var a={};n.r(a),n.d(a,"discoverMovies",(function(){return T}));var i={};n.r(i),n.d(i,"searchMovies",(function(){return M}));var o={};n.r(o),n.d(o,"getConfiguration",(function(){return U})),n.d(o,"default",(function(){return F}));var s={};n.r(s),n.d(s,"getGenres",(function(){return L})),n.d(s,"default",(function(){return Q}));var u={};n.r(u),n.d(u,"openStack",(function(){return B})),n.d(u,"closeStack",(function(){return J})),n.d(u,"default",(function(){return K}));var l={};n.r(l),n.d(l,"SEARCH_MOVIES_SUCCESS",(function(){return X})),n.d(l,"updateFilter",(function(){return $})),n.d(l,"updateQuery",(function(){return ee})),n.d(l,"searchMovies",(function(){return te})),n.d(l,"default",(function(){return ne}));var d={};n.r(d),n.d(d,"discoverMovies",(function(){return ae})),n.d(d,"default",(function(){return ie}));var v={};n.r(v),n.d(v,"getGenres",(function(){return fe}));var f={};n.r(f),n.d(f,"getMovies",(function(){return je})),n.d(f,"filterMovies",(function(){return me})),n.d(f,"getResults",(function(){return he}));var j=n(1),m=n(0),h=n.n(m),O=n(9),b=n.n(O),g=n(16),p=n(7),y=n(32),k=(n(46),n(2)),S=n(33),E=n.n(S),x=function(e){return E()(Object(k.a)(Object(k.a)({},e),{},{url:"https://api.themoviedb.org/3"+e.url,params:Object(k.a)(Object(k.a)({},e.params||{}),{},{api_key:"0d350753f143701136974b765ca31ac5"})}))},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){return ue.dispatch({type:e,payload:Object(k.a)(Object(k.a)({},t),{},{data:n.data})})}},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=(n.response||{data:{}}).data;return ue.dispatch({type:e,payload:Object(k.a)(Object(k.a)({},t),{},{error:r.error})})}},_=function(){return x({method:"GET",url:"/configuration"})},R=function(){return x({method:"GET",url:"/genre/movie/list"})},T=function(){return x({method:"GET",url:"/discover/movie"})},M=function(e){var t=e.query;return x({method:"GET",url:"/search/movie",params:{query:t}})},G={config:r,genre:c,movie:a,search:i},I="config/GET_CONFIGURATION_SUCCESS",A={images:{}},U=function(){return function(e){return e({type:"config/GET_CONFIGURATION_REQUEST",meta:G.config.getConfiguration().then(N(I)).catch(C("config/GET_CONFIGURATION_FAILURE"))})}},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case I:var c=r.data.images;return{images:c};default:return e}},w=n(8),q="genre/GET_GENRES_SUCCESS",V={genres:{}},L=function(){return function(e){return e({type:"genre/GET_GENRES_REQUEST",meta:G.genre.getGenres().then(N(q)).catch(C("genre/GET_GENRES_FAILURE"))})}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case q:var c=r.data.genres;return{genres:c.reduce((function(e,t){return Object(k.a)(Object(k.a)({},e),{},Object(w.a)({},t.id,t))}),{})};default:return e}},D=n(17),H="layout/OPEN_STACK",P="layout/CLOSE_STACK",z={stack:[]},B=function(e){return function(t){return function(n){return n({type:H,payload:{namespace:e,props:t}})}}},J=function(e){return function(){return function(t){return t({type:P,payload:{namespace:e}})}}},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case H:var c=r.namespace,a=r.props;return Object(k.a)(Object(k.a)({},e),{},{stack:[].concat(Object(D.a)(e.stack),[{namespace:c,props:a||{}}])});case P:return Object(k.a)(Object(k.a)({},e),{},{stack:e.stack.filter((function(e){return e.namespace!==r.namespace}))});default:return e}},Y="search/UPDATE_QUERY",W="search/UPDATE_FILTER",X="search/SEARCH_MOVIES_SUCCESS",Z={query:"",filter:{rating:null},results:{}},$=function(e){return function(t){return t({type:W,payload:e})}},ee=function(e){return function(t){t({type:Y,payload:e}),e.query&&t(te(e))}},te=function(e){return function(t){return t({type:"search/SEARCH_MOVIES_REQUEST",meta:G.search.searchMovies(e).then(N(X,e)).catch(C("search/SEARCH_MOVIES_FAILURE"))})}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Y:return Object(k.a)(Object(k.a)({},e),{},{query:r.query});case W:return Object(k.a)(Object(k.a)({},e),{},{filter:Object(k.a)(Object(k.a)({},e.filter),r)});case X:var c=r.query,a=r.data.results;return Object(k.a)(Object(k.a)({},e),{},{results:Object(k.a)(Object(k.a)({},e.results),{},Object(w.a)({},c,a.map((function(e){return e.id}))))});default:return e}},re="movie/DISCOVER_MOVIES_SUCCESS",ce={list:[],movies:{}},ae=function(){return function(e){return e({type:"movie/DISCOVER_MOVIES_REQUEST",meta:G.movie.discoverMovies().then(N(re)).catch(C("movie/DISCOVER_MOVIES_FAILURE"))})}},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case re:var c=r.data.results;return Object(k.a)(Object(k.a)({},e),{},{list:c.map((function(e){return e.id})),movies:c.reduce((function(e,t){return Object(k.a)(Object(k.a)({},e),{},Object(w.a)({},t.id,t))}),Object(k.a)({},e.movies))});case X:var a=r.data.results;return Object(k.a)(Object(k.a)({},e),{},{movies:a.reduce((function(e,t){return Object(k.a)(Object(k.a)({},e),{},Object(w.a)({},t.id,t))}),Object(k.a)({},e.movies))});default:return e}},oe=Object(p.c)({config:F,genre:Q,layout:K,movie:ie,search:ne}),se=[y.a];var ue=Object(p.e)(oe,{},p.d.apply(void 0,[p.a.apply(void 0,se)].concat([]))),le=n(6),de=n.n(le),ve=n(11),fe=Object(ve.a)((function(e){return e.genre.genres}),(function(e){return e.movie.genre_ids}),(function(e,t){return t.map((function(t){return e[t]}))})),je=Object(ve.a)((function(e){return e.movie}),(function(e){return(e.list||[]).map((function(t){return e.movies[t]}))})),me=Object(ve.a)((function(e){return e.movies}),(function(e){return e.rating}),(function(e,t){return e.filter((function(e){var n=e.vote_average;return n&&n>=t&&n<t+2}))})),he=Object(ve.a)((function(e){return e.movie}),(function(e){return e.search}),(function(e,t){var n,r=t.query,c=t.filter.rating,a=t.results;return n=r?(a[r]||[]).map((function(t){return e.movies[t]})):je({movie:e}),null!==c?me({movies:n,rating:c}):n})),Oe={genre:v,movie:f},be={config:o,genre:s,layout:u,movie:d,search:l},ge=function(e,t,n){return Object(g.b)(e,t&&function(e){return Object(p.b)(t,e)})(n)},pe=ge(null,{openSearch:be.layout.openStack("search")},(function(e){var t=e.openSearch;return Object(j.jsxs)("div",{className:"ui-header",children:[Object(j.jsx)("div",{className:"ui-header-title",children:Object(j.jsx)("h1",{children:"MUST WATCH"})}),Object(j.jsx)("div",{className:"ui-header-search",onClick:function(){return t()},children:Object(j.jsx)("i",{className:"icon-search"})})]})})),ye=n(69),ke=n(68),Se=function(e){var t=e.className,n=e.children,r=Object(m.useRef)(null),c=h.a.Children.toArray(n);return Object(j.jsx)(ye.a,{component:null,children:c.map((function(e,n){return Object(j.jsx)(ke.a,{nodeRef:r,timeout:400,children:Object(j.jsx)("div",{ref:r,className:de()("layer-wrap",t,{active:n===c.length-1}),children:e})},e.key)}))})},Ee=n(34),xe=n.n(Ee),Ne=function(){Object(m.useEffect)((function(){return document.body.style.overflow="hidden",function(){return document.body.removeAttribute("style")}}))},Ce=function(e){var t=e.className,n=e.closeStack,r=e.children;return Ne(),Object(j.jsxs)("div",{className:de()("ui-stack",t),children:[Object(j.jsx)("div",{className:"ui-stack-close",onClick:n,children:Object(j.jsx)("i",{className:"icon-close"})}),r]})},_e=n(35),Re=ge((function(e,t){var n=e.config,r=e.movie,c=t.id;return{movie:r.movies[c],config:n.images}}),null,(function(e){var t=e.size,n=void 0===t?"w500":t,r=e.backdrop,c=void 0!==r&&r,a=e.onClick,i=void 0===a?null:a,o=e.movie,s=e.config,u=Object(m.useState)(!1),l=Object(_e.a)(u,2),d=l[0],v=l[1],f=[s.base_url,n,c?o.backdrop_path:o.poster_path].join("");return Object(j.jsx)("div",{className:de()("ui-poster",{"has-click":i}),onClick:i,children:Object(j.jsx)("img",{alt:"",className:de()({loaded:d}),src:f,onLoad:function(){v(!0)}})})})),Te=Object(D.a)(Array(5).keys()),Me=function(e){var t=e.voteAverage,n=e.onChange;return Object(j.jsx)("div",{className:"ui-rating",children:Te.map((function(e){return Object(j.jsx)("i",{onClick:function(){n&&n(e)},className:de()("icon-star-outline",{"icon-star-rate":null!==t&&t>=2*e})},e)}))})},Ge=function(e){var t=e.genres;return Object(j.jsx)("ul",{className:"ui-genres",children:t.map((function(e){var t=e.id,n=e.name;return Object(j.jsx)("li",{children:n},t)}))})},Ie={movie:ge((function(e,t){var n=e.movie,r=e.genre,c=t.id;return{movie:n.movies[c],genres:Oe.genre.getGenres({genre:r,movie:n.movies[c]})}}),{closeStack:be.layout.closeStack("movie")},(function(e){var t=e.movie,n=e.genres,r=e.closeStack;return Object(j.jsxs)(Ce,{className:"movie-stack",closeStack:r,children:[Object(j.jsx)("div",{className:"movie-stack-backdrop",children:Object(j.jsx)(Re,{id:t.id,size:"w1280",backdrop:!0})}),Object(j.jsxs)("div",{className:"movie-stack-content",children:[Object(j.jsx)("h1",{className:"movie-stack-title",children:t.title}),t.vote_average>0&&Object(j.jsx)("div",{className:"movie-stack-rating",children:Object(j.jsx)(Me,{voteAverage:t.vote_average})}),t.release_date&&Object(j.jsx)("div",{className:"movie-stack-date",children:xe()(t.release_date).format("Y")}),Object(j.jsx)("p",{className:"movie-stack-overview",children:t.overview}),n.length>0&&Object(j.jsx)("div",{className:"movie-stack-genres",children:Object(j.jsx)(Ge,{genres:n})})]})]})})),search:ge((function(e){var t=e.search,n=e.movie;return{query:t.query,filter:t.filter,results:Oe.movie.getResults({movie:n,search:t})}}),{updateFilter:be.search.updateFilter,updateQuery:be.search.updateQuery,closeStack:be.layout.closeStack("search"),openMovie:be.layout.openStack("movie")},(function(e){var t=e.query,n=e.filter,r=e.results,c=e.updateQuery,a=e.updateFilter,i=e.openMovie,o=e.closeStack;return Object(j.jsxs)(Ce,{className:"search-stack",closeStack:o,children:[Object(j.jsx)("div",{className:"search-stack-head",children:Object(j.jsxs)("div",{className:"search-stack-input-wrapper",children:[Object(j.jsx)("input",{autoFocus:!0,type:"text",placeholder:"search movies",value:t,onChange:function(e){return c({query:e.target.value})},className:"search-stack-input"}),Object(j.jsx)("i",{className:"icon-search"}),Object(j.jsx)("div",{className:"search-stack-input-rating",children:Object(j.jsx)(Me,{voteAverage:n.rating,onChange:function(e){var t=2*e;a({rating:t===n.rating?null:t})}})})]})}),r.length>0&&Object(j.jsx)("div",{className:"search-stack-grid",children:r.map((function(e){var t=e.id;return Object(j.jsx)("div",{className:"search-stack-grid-item",children:Object(j.jsx)(Re,{id:t,size:"w342",onClick:function(){return i({id:t})}})},t)}))})]})}))},Ae=ge((function(e){return{stack:e.layout.stack}}),null,(function(e){var t=e.stack;e.closeStack;return Object(j.jsx)(Se,{className:"ui-stack-layer",children:t.map((function(e){var t=e.namespace,n=e.props,r=Ie[t];return r?Object(j.jsx)(r,Object(k.a)({},n),t):null}))})})),Ue=ge((function(e){return{stackOpen:e.layout.stack.length>0}}),null,(function(e){var t=e.stackOpen,n=e.children;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("main",{className:de()("layer-main",{"stack-open":t}),children:[Object(j.jsx)("div",{className:"layer-main-header",children:Object(j.jsx)(pe,{})}),Object(j.jsx)("div",{className:"layer-main-content",children:n})]}),Object(j.jsx)(Ae,{})]})})),Fe=ge((function(e){var t=e.movie;return{movies:Oe.movie.getMovies({movie:t})}}),{discoverMovies:be.movie.discoverMovies,getConfiguration:be.config.getConfiguration,getGenres:be.genre.getGenres,openMovie:be.layout.openStack("movie")},(function(e){var t=e.movies,n=e.discoverMovies,r=e.getConfiguration,c=e.getGenres,a=e.openMovie;return Object(m.useEffect)((function(){n()}),[n]),Object(m.useEffect)((function(){r()}),[r]),Object(m.useEffect)((function(){c()}),[c]),Object(j.jsx)("div",{className:"movie-grid",children:t.map((function(e){var t=e.id;e.title;return Object(j.jsx)("div",{className:"movie-grid-item",children:Object(j.jsx)(Re,{id:t,onClick:function(){return a({id:t})}})},t)}))})})),we=(n(65),function(){return Object(j.jsx)(g.a,{store:ue,children:Object(j.jsx)(Ue,{children:Object(j.jsx)(Fe,{})})})}),qe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))},Ve=document.getElementById("root");b.a.render(Object(j.jsx)(h.a.StrictMode,{children:Object(j.jsx)(we,{})}),Ve),qe()}},[[66,1,2]]]);
//# sourceMappingURL=main.c75d6834.chunk.js.map