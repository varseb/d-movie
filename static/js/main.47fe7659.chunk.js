(this["webpackJsonpd-movie"]=this["webpackJsonpd-movie"]||[]).push([[0],{62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"getConfiguration",(function(){return S}));var c={};n.r(c),n.d(c,"getGenres",(function(){return C}));var i={};n.r(i),n.d(i,"discoverMovies",(function(){return _}));var a={};n.r(a),n.d(a,"getConfiguration",(function(){return R})),n.d(a,"default",(function(){return M}));var o={};n.r(o),n.d(o,"getGenres",(function(){return F})),n.d(o,"default",(function(){return L}));var s={};n.r(s),n.d(s,"openStack",(function(){return z})),n.d(s,"closeStack",(function(){return B})),n.d(s,"default",(function(){return J}));var u={};n.r(u),n.d(u,"discoverMovies",(function(){return W})),n.d(u,"default",(function(){return Y}));var d={};n.r(d),n.d(d,"getGenres",(function(){return de}));var l={};n.r(l),n.d(l,"getMovies",(function(){return le}));var v=n(1),f=n(0),m=n.n(f),j=n(7),b=n.n(j),O=n(14),g=n(6),h=n(29),p=(n(43),n(2)),k=n(30),y=n.n(k),E=function(e){return y()(Object(p.a)(Object(p.a)({},e),{},{url:"https://api.themoviedb.org/3"+e.url,params:Object(p.a)(Object(p.a)({},e.params||{}),{},{api_key:"0d350753f143701136974b765ca31ac5"})}))},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){return Z.dispatch({type:e,payload:Object(p.a)(Object(p.a)({},t),{},{data:n.data})})}},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=(n.response||{data:{}}).data;return Z.dispatch({type:e,payload:Object(p.a)(Object(p.a)({},t),{},{error:r.error})})}},S=function(){return E({method:"GET",url:"/configuration"})},C=function(){return E({method:"GET",url:"/genre/movie/list"})},_=function(){return E({method:"GET",url:"/discover/movie"})},G={config:r,genre:c,movie:i},T="config/GET_CONFIGURATION_SUCCESS",I={images:{}},R=function(){return function(e){return e({type:"config/GET_CONFIGURATION_REQUEST",meta:G.config.getConfiguration().then(x(T)).catch(N("config/GET_CONFIGURATION_FAILURE"))})}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case T:var c=r.data.images;return{images:c};default:return e}},w=n(8),U="genre/GET_GENRES_SUCCESS",A={genres:{}},F=function(){return function(e){return e({type:"genre/GET_GENRES_REQUEST",meta:G.genre.getGenres().then(x(U)).catch(N("genre/GET_GENRES_FAILURE"))})}},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case U:var c=r.data.genres;return{genres:c.reduce((function(e,t){return Object(p.a)(Object(p.a)({},e),{},Object(w.a)({},t.id,t))}),{})};default:return e}},V=n(32),D="layout/OPEN_STACK",P="layout/CLOSE_STACK",Q={stack:[]},z=function(e){return function(t){return function(n){return n({type:D,payload:{namespace:e,props:t}})}}},B=function(e){return function(){return function(t){return t({type:P,payload:{namespace:e}})}}},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case D:var c=r.namespace,i=r.props;return Object(p.a)(Object(p.a)({},e),{},{stack:[].concat(Object(V.a)(e.stack),[{namespace:c,props:i||{}}])});case P:return Object(p.a)(Object(p.a)({},e),{},{stack:e.stack.filter((function(e){return e.namespace!==r.namespace}))});default:return e}},K="movie/DISCOVER_MOVIES_SUCCESS",H={list:[],movies:{}},W=function(){return function(e){return e({type:"movie/DISCOVER_MOVIES_REQUEST",meta:G.movie.discoverMovies().then(x(K)).catch(N("movie/DISCOVER_MOVIES_FAILURE"))})}},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case K:var c=r.data.results;return Object(p.a)(Object(p.a)({},e),{},{list:c.map((function(e){return e.id})),movies:c.reduce((function(e,t){return Object(p.a)(Object(p.a)({},e),{},Object(w.a)({},t.id,t))}),Object(p.a)({},e.movies))});default:return e}},q=Object(g.c)({config:M,genre:L,layout:J,movie:Y}),X=[h.a];var Z=Object(g.e)(q,{},g.d.apply(void 0,[g.a.apply(void 0,X)].concat([]))),$=n(9),ee=n.n($),te=function(){return Object(v.jsxs)("div",{className:"ui-header",children:[Object(v.jsx)("div",{className:"ui-header-title",children:Object(v.jsx)("h1",{children:"MUST WATCH"})}),Object(v.jsx)("div",{className:"ui-header-search",children:Object(v.jsx)("i",{className:"icon-search"})})]})},ne=n(66),re=n(65),ce=function(e){var t=e.className,n=e.children,r=Object(f.useRef)(null),c=m.a.Children.toArray(n);return Object(v.jsx)(ne.a,{component:null,children:c.map((function(e,n){return Object(v.jsx)(re.a,{nodeRef:r,timeout:400,children:Object(v.jsx)("div",{ref:r,className:ee()("layer-wrap",t,{active:n===c.length-1}),children:e})},e.key)}))})},ie=n(31),ae=n.n(ie),oe=function(){Object(f.useEffect)((function(){return document.body.style.overflow="hidden",function(){return document.body.removeAttribute("style")}}))},se=function(e){var t=e.className,n=e.closeStack,r=e.children;return oe(),Object(f.useEffect)((function(){var e=function(e){27===e.keyCode&&n()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[n]),Object(v.jsxs)("div",{className:ee()("ui-stack",t),children:[Object(v.jsx)("div",{className:"ui-stack-close",onClick:n,children:Object(v.jsx)("i",{className:"icon-close"})}),r]})},ue=n(13),de=Object(ue.a)((function(e){return e.genre.genres}),(function(e){return e.movie.genre_ids}),(function(e,t){return t.map((function(t){return e[t]}))})),le=Object(ue.a)((function(e){return e.movie}),(function(e){return(e.list||[]).map((function(t){return e.movies[t]}))})),ve={genre:d,movie:l},fe={config:a,genre:o,layout:s,movie:u},me=function(e,t,n){return Object(O.b)(e,t&&function(e){return Object(g.b)(t,e)})(n)},je=me((function(e,t){var n=e.config,r=e.movie,c=t.id;return{movie:r.movies[c],config:n.images}}),null,(function(e){var t=e.size,n=void 0===t?"w500":t,r=e.backdrop,c=void 0!==r&&r,i=e.movie,a=[e.config.base_url,n,c?i.backdrop_path:i.poster_path].join("");return Object(v.jsx)("div",{className:"ui-poster",children:Object(v.jsx)("img",{src:a,alt:""})})})),be={movie:me((function(e,t){var n=e.movie,r=e.genre,c=t.id;return{movie:n.movies[c],genres:ve.genre.getGenres({genre:r,movie:n.movies[c]})}}),{closeStack:fe.layout.closeStack("movie")},(function(e){var t=e.movie,n=e.genres,r=e.closeStack;return Object(v.jsxs)(se,{className:"movie-stack",closeStack:r,children:[Object(v.jsx)("div",{className:"movie-stack-backdrop",children:Object(v.jsx)(je,{id:t.id,size:"w1280",backdrop:!0})}),Object(v.jsxs)("div",{className:"movie-stack-content",children:[Object(v.jsx)("h1",{className:"movie-stack-title",children:t.title}),Object(v.jsx)("div",{className:"movie-stack-date",children:ae()(t.release_date).format("Y")}),Object(v.jsx)("p",{className:"movie-stack-overview",children:t.overview}),n.length>0&&Object(v.jsx)("ul",{className:"movie-stack-genres",children:n.map((function(e){var t=e.id,n=e.name;return Object(v.jsx)("li",{children:n},t)}))}),Object(v.jsx)("div",{className:"movie-stack-rating",children:Object(v.jsx)("div",{className:"movie-stack-rating-number",children:t.vote_average})})]})]})}))},Oe=me((function(e){return{stack:e.layout.stack}}),null,(function(e){var t=e.stack;e.closeStack;return Object(v.jsx)(ce,{className:"ui-stack-layer",children:t.map((function(e){var t=e.namespace,n=e.props,r=be[t];return r?Object(v.jsx)(r,Object(p.a)({},n),t):null}))})})),ge=me((function(e){return{stackOpen:e.layout.stack.length>0}}),null,(function(e){var t=e.stackOpen,n=e.children;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("main",{className:ee()("layer-main",{"stack-open":t}),children:[Object(v.jsx)("div",{className:"layer-main-header",children:Object(v.jsx)(te,{})}),Object(v.jsx)("div",{className:"layer-main-content",children:n})]}),Object(v.jsx)(Oe,{})]})})),he=me((function(e){var t=e.movie;return{movies:ve.movie.getMovies({movie:t})}}),{discoverMovies:fe.movie.discoverMovies,getConfiguration:fe.config.getConfiguration,getGenres:fe.genre.getGenres,openMovie:fe.layout.openStack("movie")},(function(e){var t=e.movies,n=e.discoverMovies,r=e.getConfiguration,c=e.getGenres,i=e.openMovie;return Object(f.useEffect)((function(){n()}),[n]),Object(f.useEffect)((function(){r()}),[r]),Object(f.useEffect)((function(){c()}),[c]),Object(v.jsx)("div",{className:"movie-grid",children:t.map((function(e){var t=e.id;e.title;return Object(v.jsx)("div",{className:"movie-grid-item",onClick:function(){return i({id:t})},children:Object(v.jsx)(je,{id:t})},t)}))})})),pe=(n(62),function(){return Object(v.jsx)(O.a,{store:Z,children:Object(v.jsx)(ge,{children:Object(v.jsx)(he,{})})})}),ke=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),i(e),a(e)}))},ye=document.getElementById("root");b.a.render(Object(v.jsx)(m.a.StrictMode,{children:Object(v.jsx)(pe,{})}),ye),ke()}},[[63,1,2]]]);
//# sourceMappingURL=main.47fe7659.chunk.js.map